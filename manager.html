<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manager Dashboard - ExpenseFlow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #4338ca;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-600: #4b5563;
            --gray-800: #1f2937;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        
        .sidebar {
            transition: all 0.3s ease;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .status-pending {
            background-color: #fef3c7;
            color: #d97706;
        }
        
        .status-approved {
            background-color: #d1fae5;
            color: #059669;
        }
        
        .status-rejected {
            background-color: #fee2e2;
            color: #dc2626;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .table-row:hover {
            background-color: #f9fafb;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }
        
        .modal-overlay.active .modal-content {
            transform: translateY(0);
        }
        
        .stat-card {
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
        }
        
        .stat-pending::before {
            background-color: var(--warning);
        }
        
        .stat-approved::before {
            background-color: var(--success);
        }
        
        .stat-rejected::before {
            background-color: var(--danger);
        }
        
        .stat-total::before {
            background-color: var(--primary);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <div class="sidebar w-64 bg-white shadow-md flex flex-col">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-receipt text-white"></i>
                    </div>
                    <h1 class="text-xl font-bold text-gray-800">ExpenseFlow</h1>
                </div>
            </div>
            
            <div class="flex-1 p-4">
                <nav class="space-y-2">
                    <a href="manager-dashboard.html" class="flex items-center space-x-3 p-3 rounded-lg bg-indigo-50 text-indigo-700 font-medium">
                        <i class="fas fa-tachometer-alt w-5"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="approvals.html" class="flex items-center space-x-3 p-3 rounded-lg text-gray-600 hover:bg-gray-100">
                        <i class="fas fa-check-circle w-5"></i>
                        <span>Approvals</span>
                        <span class="ml-auto bg-indigo-600 text-white text-xs px-2 py-1 rounded-full">12</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-600 hover:bg-gray-100">
                        <i class="fas fa-users w-5"></i>
                        <span>Team</span>
                    </a>
                    <a href="#" class="flex items-center space-x-3 p-3 rounded-lg text-gray-600 hover:bg-gray-100">
                        <i class="fas fa-chart-bar w-5"></i>
                        <span>Reports</span>
                    </a>
                </nav>
            </div>
            
            <div class="p-4 border-t border-gray-200">
                <div class="flex items-center space-x-3 p-3">
                    <div class="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-indigo-600"></i>
                    </div>
                    <div>
                        <p class="font-medium text-gray-800">Sarah Johnson</p>
                        <p class="text-sm text-gray-500">Manager</p>
                    </div>
                </div>
                <a href="login.html" class="w-full mt-2 flex items-center space-x-2 p-3 rounded-lg text-gray-600 hover:bg-gray-100">
                    <i class="fas fa-sign-out-alt w-5"></i>
                    <span>Logout</span>
                </a>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="flex-1 overflow-auto">
            <header class="bg-white shadow-sm p-4 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">Manager Dashboard</h2>
                        <p class="text-gray-600">Review and approve expense reports</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                            <input type="text" placeholder="Search expenses..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                        </div>
                        <button class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center space-x-2">
                            <i class="fas fa-plus"></i>
                            <span>New Report</span>
                        </button>
                    </div>
                </div>
            </header>
            
            <main class="p-6">
                <!-- Stats Overview -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="stat-card card p-5 stat-total">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-500 text-sm">Total Expenses</p>
                                <h3 class="text-2xl font-bold text-gray-800 mt-1">$12,458</h3>
                            </div>
                            <div class="p-3 bg-indigo-100 rounded-lg">
                                <i class="fas fa-receipt text-indigo-600"></i>
                            </div>
                        </div>
                        <p class="text-green-600 text-sm mt-2">
                            <i class="fas fa-arrow-up"></i> 12.5% from last month
                        </p>
                    </div>
                    
                    <div class="stat-card card p-5 stat-pending">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-500 text-sm">Pending Approval</p>
                                <h3 class="text-2xl font-bold text-gray-800 mt-1">8</h3>
                            </div>
                            <div class="p-3 bg-yellow-100 rounded-lg">
                                <i class="fas fa-clock text-yellow-600"></i>
                            </div>
                        </div>
                        <p class="text-yellow-600 text-sm mt-2">Needs your attention</p>
                    </div>
                    
                    <div class="stat-card card p-5 stat-approved">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-500 text-sm">Approved</p>
                                <h3 class="text-2xl font-bold text-gray-800 mt-1">42</h3>
                            </div>
                            <div class="p-3 bg-green-100 rounded-lg">
                                <i class="fas fa-check-circle text-green-600"></i>
                            </div>
                        </div>
                        <p class="text-green-600 text-sm mt-2">This month</p>
                    </div>
                    
                    <div class="stat-card card p-5 stat-rejected">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="text-gray-500 text-sm">Rejected</p>
                                <h3 class="text-2xl font-bold text-gray-800 mt-1">3</h3>
                            </div>
                            <div class="p-3 bg-red-100 rounded-lg">
                                <i class="fas fa-times-circle text-red-600"></i>
                            </div>
                        </div>
                        <p class="text-red-600 text-sm mt-2">Requires follow-up</p>
                    </div>
                </div>
                
                <!-- Pending Approvals Section -->
                <div class="card p-6 mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-gray-800">Pending Approvals</h3>
                        <div class="flex space-x-2">
                            <button class="px-3 py-1 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                                <i class="fas fa-filter mr-1"></i> Filter
                            </button>
                            <button class="px-3 py-1 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                                <i class="fas fa-sort mr-1"></i> Sort
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="text-left border-b border-gray-200">
                                    <th class="pb-3 text-gray-500 font-medium">Employee</th>
                                    <th class="pb-3 text-gray-500 font-medium">Description</th>
                                    <th class="pb-3 text-gray-500 font-medium">Category</th>
                                    <th class="pb-3 text-gray-500 font-medium">Amount</th>
                                    <th class="pb-3 text-gray-500 font-medium">Date</th>
                                    <th class="pb-3 text-gray-500 font-medium">Priority</th>
                                    <th class="pb-3 text-gray-500 font-medium">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="pending-approvals-table">
                                <!-- Rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-4 text-center">
                        <button class="text-indigo-600 hover:text-indigo-800 font-medium">
                            View All Pending Approvals
                        </button>
                    </div>
                </div>
                
                <!-- Recent Activity Section -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="card p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Recent Activity</h3>
                        <div class="space-y-4">
                            <div class="flex items-start space-x-3">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mt-1">
                                    <i class="fas fa-check text-green-600 text-xs"></i>
                                </div>
                                <div>
                                    <p class="text-gray-800">You approved <span class="font-medium">$245.60</span> expense from John Doe</p>
                                    <p class="text-gray-500 text-sm">2 hours ago</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mt-1">
                                    <i class="fas fa-times text-red-600 text-xs"></i>
                                </div>
                                <div>
                                    <p class="text-gray-800">You rejected <span class="font-medium">$89.99</span> expense from Jane Smith</p>
                                    <p class="text-gray-500 text-sm">Yesterday</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-3">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mt-1">
                                    <i class="fas fa-plus text-blue-600 text-xs"></i>
                                </div>
                                <div>
                                    <p class="text-gray-800">New expense <span class="font-medium">$156.75</span> submitted by Robert Brown</p>
                                    <p class="text-gray-500 text-sm">2 days ago</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Team Expenses by Category</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-gray-700">Travel</span>
                                    <span class="text-gray-700 font-medium">$4,250</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-indigo-600 h-2 rounded-full" style="width: 45%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-gray-700">Meals & Entertainment</span>
                                    <span class="text-gray-700 font-medium">$2,870</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 30%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-gray-700">Office Supplies</span>
                                    <span class="text-gray-700 font-medium">$1,540</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 17%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-gray-700">Software</span>
                                    <span class="text-gray-700 font-medium">$980</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-purple-500 h-2 rounded-full" style="width: 10%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- Modal for Approval/Rejection -->
    <div class="modal-overlay" id="action-modal">
        <div class="modal-content p-6">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-gray-800" id="modal-title">Approve Expense</h3>
                <button class="text-gray-400 hover:text-gray-600" id="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="mb-6" id="expense-details">
                <!-- Expense details will be populated here -->
            </div>
            
            <div class="mb-4">
                <label for="comments" class="block text-gray-700 mb-2">Comments (Optional)</label>
                <textarea id="comments" rows="3" class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" placeholder="Add any comments for the employee..."></textarea>
            </div>
            
            <div class="flex justify-end space-x-3">
                <button class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50" id="cancel-action">
                    Cancel
                </button>
                <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 hidden" id="reject-btn">
                    Reject Expense
                </button>
                <button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 hidden" id="approve-btn">
                    Approve Expense
                </button>
            </div>
        </div>
    </div>

    <script>
        // Mock data for pending approvals
        const pendingApprovals = [
            {
                id: 1,
                employee: "John Doe",
                description: "Client dinner at Italian restaurant",
                category: "Meals & Entertainment",
                amount: 156.75,
                currency: "USD",
                date: "2023-10-15",
                priority: "High",
                receipt: true
            },
            {
                id: 2,
                employee: "Jane Smith",
                description: "Flight to San Francisco for conference",
                category: "Travel",
                amount: 485.60,
                currency: "USD",
                date: "2023-10-14",
                priority: "Medium",
                receipt: true
            },
            {
                id: 3,
                employee: "Robert Brown",
                description: "New monitor for home office",
                category: "Equipment",
                amount: 299.99,
                currency: "USD",
                date: "2023-10-13",
                priority: "Low",
                receipt: false
            },
            {
                id: 4,
                employee: "Emily Johnson",
                description: "Team building activity - escape room",
                category: "Team Activities",
                amount: 120.00,
                currency: "USD",
                date: "2023-10-12",
                priority: "Medium",
                receipt: true
            },
            {
                id: 5,
                employee: "Michael Chen",
                description: "Hotel stay during business trip",
                category: "Travel",
                amount: 320.50,
                currency: "USD",
                date: "2023-10-11",
                priority: "High",
                receipt: true
            }
        ];
        
        // DOM Elements
        const pendingApprovalsTable = document.getElementById('pending-approvals-table');
        const modalOverlay = document.getElementById('action-modal');
        const modalTitle = document.getElementById('modal-title');
        const expenseDetails = document.getElementById('expense-details');
        const closeModalBtn = document.getElementById('close-modal');
        const cancelActionBtn = document.getElementById('cancel-action');
        const rejectBtn = document.getElementById('reject-btn');
        const approveBtn = document.getElementById('approve-btn');
        const commentsTextarea = document.getElementById('comments');
        
        let currentExpenseId = null;
        let currentAction = null; // 'approve' or 'reject'
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            renderPendingApprovals();
            
            // Event listeners for modal
            closeModalBtn.addEventListener('click', closeModal);
            cancelActionBtn.addEventListener('click', closeModal);
            rejectBtn.addEventListener('click', performAction);
            approveBtn.addEventListener('click', performAction);
            
            // Close modal when clicking outside
            modalOverlay.addEventListener('click', function(e) {
                if (e.target === modalOverlay) {
                    closeModal();
                }
            });
        });
        
        // Render pending approvals table
        function renderPendingApprovals() {
            pendingApprovalsTable.innerHTML = '';
            
            pendingApprovals.forEach(expense => {
                const row = document.createElement('tr');
                row.className = 'table-row border-b border-gray-100';
                
                const priorityClass = 
                    expense.priority === 'High' ? 'bg-red-100 text-red-800' : 
                    expense.priority === 'Medium' ? 'bg-yellow-100 text-yellow-800' : 
                    'bg-green-100 text-green-800';
                
                row.innerHTML = `
                    <td class="py-4">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3">
                                <i class="fas fa-user text-indigo-600 text-sm"></i>
                            </div>
                            <span class="font-medium">${expense.employee}</span>
                        </div>
                    </td>
                    <td class="py-4">
                        <div>
                            <p class="font-medium">${expense.description}</p>
                            ${expense.receipt ? 
                                '<p class="text-xs text-indigo-600 flex items-center mt-1"><i class="fas fa-receipt mr-1"></i> Receipt attached</p>' : 
                                '<p class="text-xs text-gray-500 flex items-center mt-1"><i class="fas fa-times mr-1"></i> No receipt</p>'
                            }
                        </div>
                    </td>
                    <td class="py-4">
                        <span class="px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm">${expense.category}</span>
                    </td>
                    <td class="py-4 font-medium">$${expense.amount.toFixed(2)}</td>
                    <td class="py-4 text-gray-600">${formatDate(expense.date)}</td>
                    <td class="py-4">
                        <span class="px-2 py-1 rounded text-xs font-medium ${priorityClass}">${expense.priority}</span>
                    </td>
                    <td class="py-4">
                        <div class="flex space-x-2">
                            <button class="approve-btn p-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200" data-id="${expense.id}">
                                <i class="fas fa-check"></i>
                            </button>
                            <button class="reject-btn p-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200" data-id="${expense.id}">
                                <i class="fas fa-times"></i>
                            </button>
                            <button class="p-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200" data-id="${expense.id}">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </td>
                `;
                
                pendingApprovalsTable.appendChild(row);
            });
            
            // Add event listeners to action buttons
            document.querySelectorAll('.approve-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    openActionModal(parseInt(this.getAttribute('data-id')), 'approve');
                });
            });
            
            document.querySelectorAll('.reject-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    openActionModal(parseInt(this.getAttribute('data-id')), 'reject');
                });
            });
        }
        
        // Format date for display
        function formatDate(dateString) {
            const options = { month: 'short', day: 'numeric', year: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }
        
        // Open modal for approval/rejection
        function openActionModal(expenseId, action) {
            currentExpenseId = expenseId;
            currentAction = action;
            
            const expense = pendingApprovals.find(e => e.id === expenseId);
            if (!expense) return;
            
            // Update modal title and buttons
            if (action === 'approve') {
                modalTitle.textContent = 'Approve Expense';
                approveBtn.classList.remove('hidden');
                rejectBtn.classList.add('hidden');
            } else {
                modalTitle.textContent = 'Reject Expense';
                rejectBtn.classList.remove('hidden');
                approveBtn.classList.add('hidden');
            }
            
            // Populate expense details
            expenseDetails.innerHTML = `
                <div class="bg-gray-50 p-4 rounded-lg">
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-600">Employee:</span>
                        <span class="font-medium">${expense.employee}</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-600">Description:</span>
                        <span class="font-medium">${expense.description}</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-600">Category:</span>
                        <span class="font-medium">${expense.category}</span>
                    </div>
                    <div class="flex justify-between mb-2">
                        <span class="text-gray-600">Amount:</span>
                        <span class="font-medium">$${expense.amount.toFixed(2)} ${expense.currency}</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-600">Date:</span>
                        <span class="font-medium">${formatDate(expense.date)}</span>
                    </div>
                </div>
            `;
            
            // Clear comments
            commentsTextarea.value = '';
            
            // Show modal
            modalOverlay.classList.add('active');
        }
        
        // Close modal
        function closeModal() {
            modalOverlay.classList.remove('active');
            currentExpenseId = null;
            currentAction = null;
        }
        
        // Perform approval or rejection
        function performAction() {
            if (!currentExpenseId || !currentAction) return;
            
            const comments = commentsTextarea.value.trim();
            
            // In a real application, you would send this to the server
            console.log(`Expense ${currentExpenseId} ${currentAction}d with comments: ${comments}`);
            
            // Show confirmation message
            alert(`Expense ${currentAction === 'approve' ? 'approved' : 'rejected'} successfully!`);
            
            // Remove from pending approvals (in a real app, this would be handled by the server response)
            const index = pendingApprovals.findIndex(e => e.id === currentExpenseId);
            if (index !== -1) {
                pendingApprovals.splice(index, 1);
                renderPendingApprovals();
            }
            
            closeModal();
        }
    </script>
</body>
</html>

